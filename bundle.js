!function(n){var t={};function c(d){if(t[d])return t[d].exports;var u=t[d]={i:d,l:!1,exports:{}};return n[d].call(u.exports,u,u.exports,c),u.l=!0,u.exports}c.m=n,c.c=t,c.d=function(n,t,d){c.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:d})},c.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(n,t){if(1&t&&(n=c(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var d=Object.create(null);if(c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var u in n)c.d(d,u,function(t){return n[t]}.bind(null,u));return d},c.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(t,"a",t),t},c.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},c.p="/Users/spl/lsp/workspace/oasis-wallet/oasis-test-dapp/dist",c(c.s=0)}([function(module,exports){eval("let account\n\nconst initializeOasis = async () => {\n  const onboardButton = document.getElementById('connectButton')\n  const getAccountsButton = document.getElementById('getAccounts')\n  const getAccountsResults = document.getElementById('getAccountsResult')\n\n\n  onboardButton.onclick = () => {\n    console.log('onboardButton')\n    if (!window.oasis) {\n      alert(\"请先安装oasis-extension-wallet\")\n    } else {\n      onboardButton.innerText = 'Onboarding in progress'\n      window.oasis.requestAccounts().then((approveAccount) => {\n        if (Array.isArray(approveAccount) && approveAccount.length > 0) {\n          account = approveAccount\n          document.getElementById('accounts').innerHTML = approveAccount;\n          onboardButton.innerText = 'Connected'\n          onboardButton.disabled = true\n        } else {\n          onboardButton.innerText = accounts.error\n        }\n      })\n        ;\n    }\n  }\n  /**\n   * get account\n   */\n  getAccountsButton.onclick = async () => {\n    if (window.oasis) {\n      account = await window.oasis.getAccounts();\n      if (Array.isArray(account) && account.length > 0) {\n        getAccountsResults.innerHTML = account || 'Not able to get accounts'\n      }\n    }\n  }\n\n\n  const sendButton = document.getElementById('sendButton')\n  const sendAmountInput = document.getElementById('sendAmountInput')\n  const receiveAddressInput = document.getElementById('receiveAddressInput')\n  const sendResultDisplay = document.getElementById('sendResultDisplay')\n\n  /**\n   * send transfer\n   */\n  sendButton.onclick = async () => {\n    let from = account && account.length > 0 ? account[0] : \"\"\n    let signResult = await window.oasis.signTransaction({\n      amount: sendAmountInput.value,\n      from: from,\n      to: receiveAddressInput.value,\n    })\n    sendResultDisplay.innerHTML = signResult.error || signResult.hash\n  }\n\n\n  /**\n   * add escrow\n   */\n  const addEscrowButton = document.getElementById('addEscrowButton')\n  const addEscrowAmountInput = document.getElementById('addEscrowAmountInput')\n  const vaildatorAddressInput = document.getElementById('vaildatorAddressInput')\n  const addEscrowResultDisplay = document.getElementById('addEscrowResultDisplay')\n\n  addEscrowButton.onclick = async () => {\n    let from = account && account.length > 0 ? account[0] : \"\"\n    let signResult = await window.oasis.signAddEscrow({\n      amount: addEscrowAmountInput.value,\n      from: from,\n      to: vaildatorAddressInput.value,\n    })\n    addEscrowResultDisplay.innerHTML = signResult.error || signResult.hash\n  }\n\n\n  /**\n   * get account from extension\n   */\n  async function getAccount() {\n    if (window.oasis) {\n      account = await window.oasis.getAccounts()\n      if (Array.isArray(account) && account.length > 0) {\n        onboardButton.innerText = 'Connected'\n        onboardButton.disabled = true\n        document.getElementById('accounts').innerHTML = account[0] || \"\";\n      }\n    }\n  }\n  setTimeout(() => {\n    getAccount()\n    if (window.oasis) {\n      window.oasis.onAccountChange('accountsChanged', handleNewAccounts);\n    }\n  }, 200);\n\n  function handleNewAccounts(newAccounts) {\n    if (Array.isArray(newAccounts)) {\n      document.getElementById('accounts').innerHTML = newAccounts;\n      if(newAccounts.length===0){\n        onboardButton.innerText = 'Connect'\n        onboardButton.disabled = false\n      }\n    }\n  }\n\n\n  function handleNewChain(chainId) {\n    // chainIdDiv.innerHTML = chainId;\n  }\n  function handleNewNetwork(networkId) {\n    // networkDiv.innerHTML = networkId;\n  }\n  // window.oasis.on('chainChanged', handleNewChain);//处理 更改链\n  // window.oasis.on('networkChanged', handleNewNetwork);//处理 网络更改\n}\nwindow.addEventListener('DOMContentLoaded', initializeOasis)//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQseURBQXlEO0FBQ3pEO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBhY2NvdW50XG5cbmNvbnN0IGluaXRpYWxpemVPYXNpcyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3Qgb25ib2FyZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0QnV0dG9uJylcbiAgY29uc3QgZ2V0QWNjb3VudHNCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2V0QWNjb3VudHMnKVxuICBjb25zdCBnZXRBY2NvdW50c1Jlc3VsdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2V0QWNjb3VudHNSZXN1bHQnKVxuXG5cbiAgb25ib2FyZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdvbmJvYXJkQnV0dG9uJylcbiAgICBpZiAoIXdpbmRvdy5vYXNpcykge1xuICAgICAgYWxlcnQoXCLor7flhYjlronoo4VvYXNpcy1leHRlbnNpb24td2FsbGV0XCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIG9uYm9hcmRCdXR0b24uaW5uZXJUZXh0ID0gJ09uYm9hcmRpbmcgaW4gcHJvZ3Jlc3MnXG4gICAgICB3aW5kb3cub2FzaXMucmVxdWVzdEFjY291bnRzKCkudGhlbigoYXBwcm92ZUFjY291bnQpID0+IHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92ZUFjY291bnQpICYmIGFwcHJvdmVBY2NvdW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhY2NvdW50ID0gYXBwcm92ZUFjY291bnRcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjb3VudHMnKS5pbm5lckhUTUwgPSBhcHByb3ZlQWNjb3VudDtcbiAgICAgICAgICBvbmJvYXJkQnV0dG9uLmlubmVyVGV4dCA9ICdDb25uZWN0ZWQnXG4gICAgICAgICAgb25ib2FyZEJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbmJvYXJkQnV0dG9uLmlubmVyVGV4dCA9IGFjY291bnRzLmVycm9yXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIGdldCBhY2NvdW50XG4gICAqL1xuICBnZXRBY2NvdW50c0J1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh3aW5kb3cub2FzaXMpIHtcbiAgICAgIGFjY291bnQgPSBhd2FpdCB3aW5kb3cub2FzaXMuZ2V0QWNjb3VudHMoKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFjY291bnQpICYmIGFjY291bnQubGVuZ3RoID4gMCkge1xuICAgICAgICBnZXRBY2NvdW50c1Jlc3VsdHMuaW5uZXJIVE1MID0gYWNjb3VudCB8fCAnTm90IGFibGUgdG8gZ2V0IGFjY291bnRzJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgY29uc3Qgc2VuZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kQnV0dG9uJylcbiAgY29uc3Qgc2VuZEFtb3VudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmRBbW91bnRJbnB1dCcpXG4gIGNvbnN0IHJlY2VpdmVBZGRyZXNzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjZWl2ZUFkZHJlc3NJbnB1dCcpXG4gIGNvbnN0IHNlbmRSZXN1bHREaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmRSZXN1bHREaXNwbGF5JylcblxuICAvKipcbiAgICogc2VuZCB0cmFuc2ZlclxuICAgKi9cbiAgc2VuZEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgIGxldCBmcm9tID0gYWNjb3VudCAmJiBhY2NvdW50Lmxlbmd0aCA+IDAgPyBhY2NvdW50WzBdIDogXCJcIlxuICAgIGxldCBzaWduUmVzdWx0ID0gYXdhaXQgd2luZG93Lm9hc2lzLnNpZ25UcmFuc2FjdGlvbih7XG4gICAgICBhbW91bnQ6IHNlbmRBbW91bnRJbnB1dC52YWx1ZSxcbiAgICAgIGZyb206IGZyb20sXG4gICAgICB0bzogcmVjZWl2ZUFkZHJlc3NJbnB1dC52YWx1ZSxcbiAgICB9KVxuICAgIHNlbmRSZXN1bHREaXNwbGF5LmlubmVySFRNTCA9IHNpZ25SZXN1bHQuZXJyb3IgfHwgc2lnblJlc3VsdC5oYXNoXG4gIH1cblxuXG4gIC8qKlxuICAgKiBhZGQgZXNjcm93XG4gICAqL1xuICBjb25zdCBhZGRFc2Nyb3dCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkRXNjcm93QnV0dG9uJylcbiAgY29uc3QgYWRkRXNjcm93QW1vdW50SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkRXNjcm93QW1vdW50SW5wdXQnKVxuICBjb25zdCB2YWlsZGF0b3JBZGRyZXNzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmFpbGRhdG9yQWRkcmVzc0lucHV0JylcbiAgY29uc3QgYWRkRXNjcm93UmVzdWx0RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRFc2Nyb3dSZXN1bHREaXNwbGF5JylcblxuICBhZGRFc2Nyb3dCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICBsZXQgZnJvbSA9IGFjY291bnQgJiYgYWNjb3VudC5sZW5ndGggPiAwID8gYWNjb3VudFswXSA6IFwiXCJcbiAgICBsZXQgc2lnblJlc3VsdCA9IGF3YWl0IHdpbmRvdy5vYXNpcy5zaWduQWRkRXNjcm93KHtcbiAgICAgIGFtb3VudDogYWRkRXNjcm93QW1vdW50SW5wdXQudmFsdWUsXG4gICAgICBmcm9tOiBmcm9tLFxuICAgICAgdG86IHZhaWxkYXRvckFkZHJlc3NJbnB1dC52YWx1ZSxcbiAgICB9KVxuICAgIGFkZEVzY3Jvd1Jlc3VsdERpc3BsYXkuaW5uZXJIVE1MID0gc2lnblJlc3VsdC5lcnJvciB8fCBzaWduUmVzdWx0Lmhhc2hcbiAgfVxuXG5cbiAgLyoqXG4gICAqIGdldCBhY2NvdW50IGZyb20gZXh0ZW5zaW9uXG4gICAqL1xuICBhc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50KCkge1xuICAgIGlmICh3aW5kb3cub2FzaXMpIHtcbiAgICAgIGFjY291bnQgPSBhd2FpdCB3aW5kb3cub2FzaXMuZ2V0QWNjb3VudHMoKVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYWNjb3VudCkgJiYgYWNjb3VudC5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9uYm9hcmRCdXR0b24uaW5uZXJUZXh0ID0gJ0Nvbm5lY3RlZCdcbiAgICAgICAgb25ib2FyZEJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY291bnRzJykuaW5uZXJIVE1MID0gYWNjb3VudFswXSB8fCBcIlwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBnZXRBY2NvdW50KClcbiAgICBpZiAod2luZG93Lm9hc2lzKSB7XG4gICAgICB3aW5kb3cub2FzaXMub25BY2NvdW50Q2hhbmdlKCdhY2NvdW50c0NoYW5nZWQnLCBoYW5kbGVOZXdBY2NvdW50cyk7XG4gICAgfVxuICB9LCAyMDApO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZU5ld0FjY291bnRzKG5ld0FjY291bnRzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmV3QWNjb3VudHMpKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjb3VudHMnKS5pbm5lckhUTUwgPSBuZXdBY2NvdW50cztcbiAgICAgIGlmKG5ld0FjY291bnRzLmxlbmd0aD09PTApe1xuICAgICAgICBvbmJvYXJkQnV0dG9uLmlubmVyVGV4dCA9ICdDb25uZWN0J1xuICAgICAgICBvbmJvYXJkQnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGZ1bmN0aW9uIGhhbmRsZU5ld0NoYWluKGNoYWluSWQpIHtcbiAgICAvLyBjaGFpbklkRGl2LmlubmVySFRNTCA9IGNoYWluSWQ7XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlTmV3TmV0d29yayhuZXR3b3JrSWQpIHtcbiAgICAvLyBuZXR3b3JrRGl2LmlubmVySFRNTCA9IG5ldHdvcmtJZDtcbiAgfVxuICAvLyB3aW5kb3cub2FzaXMub24oJ2NoYWluQ2hhbmdlZCcsIGhhbmRsZU5ld0NoYWluKTsvL+WkhOeQhiDmm7TmlLnpk75cbiAgLy8gd2luZG93Lm9hc2lzLm9uKCduZXR3b3JrQ2hhbmdlZCcsIGhhbmRsZU5ld05ldHdvcmspOy8v5aSE55CGIOe9kee7nOabtOaUuVxufVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0aWFsaXplT2FzaXMpIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")}]);