!function(n){var t={};function d(u){if(t[u])return t[u].exports;var c=t[u]={i:u,l:!1,exports:{}};return n[u].call(c.exports,c,c.exports,d),c.l=!0,c.exports}d.m=n,d.c=t,d.d=function(n,t,u){d.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:u})},d.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},d.t=function(n,t){if(1&t&&(n=d(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var u=Object.create(null);if(d.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var c in n)d.d(u,c,function(t){return n[t]}.bind(null,c));return u},d.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return d.d(t,"a",t),t},d.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},d.p="/Users/lsp-/lsp/workSpace/oasis/oasis-test-dapp/dist",d(d.s=0)}([function(module,exports){eval("let account\n\nconst initializeOasis = async () => {\n  const onboardButton = document.getElementById('connectButton')\n  const getAccountsButton = document.getElementById('getAccounts')\n  const getAccountsResults = document.getElementById('getAccountsResult')\n\n\n  onboardButton.onclick = () => {\n    console.log('onboardButton')\n    if (!window.oasis) {\n      alert(\"请先安装oasis-extension-wallet\")\n    } else {\n      onboardButton.innerText = 'Onboarding in progress'\n      window.oasis.requestAccounts().then((approveAccount) => {\n        if (Array.isArray(approveAccount) && approveAccount.length > 0) {\n          account = approveAccount\n          document.getElementById('accounts').innerHTML = approveAccount;\n          onboardButton.innerText = 'Connected'\n          onboardButton.disabled = true\n        } else {\n          onboardButton.innerText = accounts.error\n        }\n      })\n        ;\n    }\n  }\n  /**\n   * get account\n   */\n  getAccountsButton.onclick = async () => {\n    if (window.oasis) {\n      account = await window.oasis.getAccounts();\n      if (Array.isArray(account) && account.length > 0) {\n        getAccountsResults.innerHTML = account || 'Not able to get accounts'\n      }\n    }\n  }\n\n\n  const sendButton = document.getElementById('sendButton')\n  const sendAmountInput = document.getElementById('sendAmountInput')\n  const receiveAddressInput = document.getElementById('receiveAddressInput')\n  const sendResultDisplay = document.getElementById('sendResultDisplay')\n\n  /**\n   * send transfer\n   */\n  sendButton.onclick = async () => {\n    let from = account && account.length > 0 ? account[0] : \"\"\n    let signResult = await window.oasis.signTransaction({\n      amount: sendAmountInput.value,\n      from: from,\n      to: receiveAddressInput.value,\n    })\n    sendResultDisplay.innerHTML = signResult.error || signResult.hash\n  }\n\n\n  /**\n   * add escrow\n   */\n  const addEscrowButton = document.getElementById('addEscrowButton')\n  const addEscrowAmountInput = document.getElementById('addEscrowAmountInput')\n  const vaildatorAddressInput = document.getElementById('vaildatorAddressInput')\n  const addEscrowResultDisplay = document.getElementById('addEscrowResultDisplay')\n\n  addEscrowButton.onclick = async () => {\n    let signResult = await window.oasis.signAddEscrow({\n      amount: addEscrowAmountInput.value,\n      from: account.address,\n      to: vaildatorAddressInput.value,\n    })\n    addEscrowResultDisplay.innerHTML = signResult.error || signResult.hash\n  }\n\n\n  /**\n   * get account from extension\n   */\n  async function getAccount() {\n    if (window.oasis) {\n      account = await window.oasis.getAccounts()\n      if (Array.isArray(account) && account.length > 0) {\n        onboardButton.innerText = 'Connected'\n        onboardButton.disabled = true\n        document.getElementById('accounts').innerHTML = account[0] || \"\";\n      }\n    }\n  }\n  setTimeout(() => {\n    getAccount()\n    if (window.oasis) {\n      window.oasis.onAccountChange('accountsChanged', handleNewAccounts);\n    }\n  }, 200);\n\n  function handleNewAccounts(newAccounts) {\n    if (Array.isArray(newAccounts)) {\n      document.getElementById('accounts').innerHTML = newAccounts;\n      if(newAccounts.length===0){\n        onboardButton.innerText = 'Connect'\n        onboardButton.disabled = false\n      }\n    }\n  }\n\n\n  function handleNewChain(chainId) {\n    // chainIdDiv.innerHTML = chainId;\n  }\n  function handleNewNetwork(networkId) {\n    // networkDiv.innerHTML = networkId;\n  }\n  // window.oasis.on('chainChanged', handleNewChain);//处理 更改链\n  // window.oasis.on('networkChanged', handleNewNetwork);//处理 网络更改\n}\nwindow.addEventListener('DOMContentLoaded', initializeOasis)//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JELHlEQUF5RDtBQUN6RDtBQUNBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgYWNjb3VudFxuXG5jb25zdCBpbml0aWFsaXplT2FzaXMgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IG9uYm9hcmRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdEJ1dHRvbicpXG4gIGNvbnN0IGdldEFjY291bnRzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dldEFjY291bnRzJylcbiAgY29uc3QgZ2V0QWNjb3VudHNSZXN1bHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dldEFjY291bnRzUmVzdWx0JylcblxuXG4gIG9uYm9hcmRCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnb25ib2FyZEJ1dHRvbicpXG4gICAgaWYgKCF3aW5kb3cub2FzaXMpIHtcbiAgICAgIGFsZXJ0KFwi6K+35YWI5a6J6KOFb2FzaXMtZXh0ZW5zaW9uLXdhbGxldFwiKVxuICAgIH0gZWxzZSB7XG4gICAgICBvbmJvYXJkQnV0dG9uLmlubmVyVGV4dCA9ICdPbmJvYXJkaW5nIGluIHByb2dyZXNzJ1xuICAgICAgd2luZG93Lm9hc2lzLnJlcXVlc3RBY2NvdW50cygpLnRoZW4oKGFwcHJvdmVBY2NvdW50KSA9PiB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHJvdmVBY2NvdW50KSAmJiBhcHByb3ZlQWNjb3VudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYWNjb3VudCA9IGFwcHJvdmVBY2NvdW50XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY291bnRzJykuaW5uZXJIVE1MID0gYXBwcm92ZUFjY291bnQ7XG4gICAgICAgICAgb25ib2FyZEJ1dHRvbi5pbm5lclRleHQgPSAnQ29ubmVjdGVkJ1xuICAgICAgICAgIG9uYm9hcmRCdXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25ib2FyZEJ1dHRvbi5pbm5lclRleHQgPSBhY2NvdW50cy5lcnJvclxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgICA7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBnZXQgYWNjb3VudFxuICAgKi9cbiAgZ2V0QWNjb3VudHNCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAod2luZG93Lm9hc2lzKSB7XG4gICAgICBhY2NvdW50ID0gYXdhaXQgd2luZG93Lm9hc2lzLmdldEFjY291bnRzKCk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhY2NvdW50KSAmJiBhY2NvdW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgZ2V0QWNjb3VudHNSZXN1bHRzLmlubmVySFRNTCA9IGFjY291bnQgfHwgJ05vdCBhYmxlIHRvIGdldCBhY2NvdW50cydcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGNvbnN0IHNlbmRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZEJ1dHRvbicpXG4gIGNvbnN0IHNlbmRBbW91bnRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kQW1vdW50SW5wdXQnKVxuICBjb25zdCByZWNlaXZlQWRkcmVzc0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2VpdmVBZGRyZXNzSW5wdXQnKVxuICBjb25zdCBzZW5kUmVzdWx0RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kUmVzdWx0RGlzcGxheScpXG5cbiAgLyoqXG4gICAqIHNlbmQgdHJhbnNmZXJcbiAgICovXG4gIHNlbmRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICBsZXQgZnJvbSA9IGFjY291bnQgJiYgYWNjb3VudC5sZW5ndGggPiAwID8gYWNjb3VudFswXSA6IFwiXCJcbiAgICBsZXQgc2lnblJlc3VsdCA9IGF3YWl0IHdpbmRvdy5vYXNpcy5zaWduVHJhbnNhY3Rpb24oe1xuICAgICAgYW1vdW50OiBzZW5kQW1vdW50SW5wdXQudmFsdWUsXG4gICAgICBmcm9tOiBmcm9tLFxuICAgICAgdG86IHJlY2VpdmVBZGRyZXNzSW5wdXQudmFsdWUsXG4gICAgfSlcbiAgICBzZW5kUmVzdWx0RGlzcGxheS5pbm5lckhUTUwgPSBzaWduUmVzdWx0LmVycm9yIHx8IHNpZ25SZXN1bHQuaGFzaFxuICB9XG5cblxuICAvKipcbiAgICogYWRkIGVzY3Jvd1xuICAgKi9cbiAgY29uc3QgYWRkRXNjcm93QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZEVzY3Jvd0J1dHRvbicpXG4gIGNvbnN0IGFkZEVzY3Jvd0Ftb3VudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZEVzY3Jvd0Ftb3VudElucHV0JylcbiAgY29uc3QgdmFpbGRhdG9yQWRkcmVzc0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhaWxkYXRvckFkZHJlc3NJbnB1dCcpXG4gIGNvbnN0IGFkZEVzY3Jvd1Jlc3VsdERpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkRXNjcm93UmVzdWx0RGlzcGxheScpXG5cbiAgYWRkRXNjcm93QnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHNpZ25SZXN1bHQgPSBhd2FpdCB3aW5kb3cub2FzaXMuc2lnbkFkZEVzY3Jvdyh7XG4gICAgICBhbW91bnQ6IGFkZEVzY3Jvd0Ftb3VudElucHV0LnZhbHVlLFxuICAgICAgZnJvbTogYWNjb3VudC5hZGRyZXNzLFxuICAgICAgdG86IHZhaWxkYXRvckFkZHJlc3NJbnB1dC52YWx1ZSxcbiAgICB9KVxuICAgIGFkZEVzY3Jvd1Jlc3VsdERpc3BsYXkuaW5uZXJIVE1MID0gc2lnblJlc3VsdC5lcnJvciB8fCBzaWduUmVzdWx0Lmhhc2hcbiAgfVxuXG5cbiAgLyoqXG4gICAqIGdldCBhY2NvdW50IGZyb20gZXh0ZW5zaW9uXG4gICAqL1xuICBhc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50KCkge1xuICAgIGlmICh3aW5kb3cub2FzaXMpIHtcbiAgICAgIGFjY291bnQgPSBhd2FpdCB3aW5kb3cub2FzaXMuZ2V0QWNjb3VudHMoKVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYWNjb3VudCkgJiYgYWNjb3VudC5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9uYm9hcmRCdXR0b24uaW5uZXJUZXh0ID0gJ0Nvbm5lY3RlZCdcbiAgICAgICAgb25ib2FyZEJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY291bnRzJykuaW5uZXJIVE1MID0gYWNjb3VudFswXSB8fCBcIlwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBnZXRBY2NvdW50KClcbiAgICBpZiAod2luZG93Lm9hc2lzKSB7XG4gICAgICB3aW5kb3cub2FzaXMub25BY2NvdW50Q2hhbmdlKCdhY2NvdW50c0NoYW5nZWQnLCBoYW5kbGVOZXdBY2NvdW50cyk7XG4gICAgfVxuICB9LCAyMDApO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZU5ld0FjY291bnRzKG5ld0FjY291bnRzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmV3QWNjb3VudHMpKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjb3VudHMnKS5pbm5lckhUTUwgPSBuZXdBY2NvdW50cztcbiAgICAgIGlmKG5ld0FjY291bnRzLmxlbmd0aD09PTApe1xuICAgICAgICBvbmJvYXJkQnV0dG9uLmlubmVyVGV4dCA9ICdDb25uZWN0J1xuICAgICAgICBvbmJvYXJkQnV0dG9uLmRpc2FibGVkID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGZ1bmN0aW9uIGhhbmRsZU5ld0NoYWluKGNoYWluSWQpIHtcbiAgICAvLyBjaGFpbklkRGl2LmlubmVySFRNTCA9IGNoYWluSWQ7XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlTmV3TmV0d29yayhuZXR3b3JrSWQpIHtcbiAgICAvLyBuZXR3b3JrRGl2LmlubmVySFRNTCA9IG5ldHdvcmtJZDtcbiAgfVxuICAvLyB3aW5kb3cub2FzaXMub24oJ2NoYWluQ2hhbmdlZCcsIGhhbmRsZU5ld0NoYWluKTsvL+WkhOeQhiDmm7TmlLnpk75cbiAgLy8gd2luZG93Lm9hc2lzLm9uKCduZXR3b3JrQ2hhbmdlZCcsIGhhbmRsZU5ld05ldHdvcmspOy8v5aSE55CGIOe9kee7nOabtOaUuVxufVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0aWFsaXplT2FzaXMpIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")}]);